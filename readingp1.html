<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>sevenplus â€” Reading (Passage 1)</title>
<link rel="icon" href="./favicon/favicon-180.png" sizes="32x32">
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<meta name="theme-color" content="#1aa2c9">

<style>
  :root{--brand-blue:#1aa2c9;--brand-gray:#55595c;--bg:#f7f9fb;--panel:#fff;--text:#1b1f23;--line:#e5e8eb}
  [data-theme="dark"]{--bg:#0e1116;--panel:#141922;--text:#e6edf3;--line:#2a2f38}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:15px/1.55 system-ui,-apple-system,Segoe UI,Roboto}
  .appbar{position:sticky;top:0;background:var(--panel);border-bottom:1px solid var(--line);display:flex;gap:12px;align-items:center;padding:10px 16px;z-index:10}
  .logo-text{font-size:1.2rem;text-decoration:none}
  .meta{margin-left:auto;display:flex;gap:10px;align-items:center}
  .btn{border:1px solid var(--line);background:var(--panel);padding:.55rem .9rem;border-radius:10px;cursor:pointer}
  .btn.primary{background:var(--brand-blue);color:#fff;border-color:var(--brand-blue)}
  .btn.ghost{background:transparent}
  .btn.active{background:var(--brand-blue);color:#fff;border-color:var(--brand-blue);pointer-events:none}
  main{max-width:1200px;margin:16px auto;padding:0 16px}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:16px}
  .toolbar{display:flex;gap:8px;align-items:center;border:1px dashed var(--line);padding:8px;border-radius:10px;margin:10px 0}
  .swatch{width:20px;height:20px;border-radius:4px;border:1px solid var(--line);cursor:pointer}
  .swatch.yellow{background:#fff59d}
  .swatch.green{background:#c8e6c9}
  .swatch.eraser{display:flex;align-items:center;justify-content:center;font-size:14px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .panel{min-height:60vh;max-height:calc(100vh - 150px);overflow:auto;border:1px solid var(--line);border-radius:12px;padding:16px;background:var(--panel)}
  h1,h2,h3{margin:.2rem 0}
  .note{color:#667085}
  .qblock{border:1px solid var(--line);border-radius:12px;padding:12px;margin:10px 0}
  .options{display:grid;gap:6px;margin-top:8px}
  input[type=text]{width:100%;padding:.5rem .6rem;border:1px solid var(--line);border-radius:10px}
  footer.nav{display:flex;gap:20px;justify-content:center;margin:18px 0}
  footer.nav a{text-decoration:none}
  footer.nav .btn{color:var(--brand-blue);border-radius:14px;font-weight:600;min-width:120px;text-align:center}
  footer.nav .btn.active{background:var(--brand-blue);color:#fff;border-color:var(--brand-blue);pointer-events:none}

  .timer{
    margin-left:8px;padding:.25rem .55rem;border:1px solid var(--line);
    border-radius:10px;background:var(--panel);font-weight:600;color:var(--brand-blue);
    min-width:64px;text-align:center;
  }

  .fill-onecol{width:100%;border:1px solid var(--line);border-radius:8px;border-collapse:separate;border-spacing:0;margin:8px 0}
  .fill-onecol td{border:0;padding:10px 12px;vertical-align:top}
  .fill-onecol input[type=text]{display:inline-block;min-width:120px;max-width:220px}

  .qnav{display:flex;gap:6px;flex-wrap:wrap;margin:12px 0 0 0;padding-top:12px;border-top:1px solid var(--line)}
  .qnav button{
    width:34px;height:34px;border:1px solid #ccc;border-radius:8px;background:#fff;cursor:pointer;
    transition:transform .06s ease, box-shadow .06s ease, background .2s ease, color .2s ease, border-color .2s ease;
  }
  .qnav button:active{transform:scale(.98)}
  .qnav button.answered{background:#4caf50;color:#fff;border-color:#4caf50;box-shadow:0 0 0 2px rgba(76,175,80,.2) inset}
  @keyframes flashGreen{0%{box-shadow:0 0 0 0 rgba(76,175,80,.0)}50%{box-shadow:0 0 0 6px rgba(76,175,80,.35)}100%{box-shadow:0 0 0 0 rgba(76,175,80,.0)}}
  .qnav button.flash{animation:flashGreen .6s ease}

  .hl{display:inline;padding:0;border:0;line-height:inherit;font:inherit}
  .hl-yellow{background-color:#fff59d}
  .hl-green{background-color:#c8e6c9}
</style>
</head>
<body>
<header class="appbar">
  <span class="logo-text"><strong style="color:var(--brand-blue)">seven</strong><strong style="color:var(--brand-gray)">plus</strong></span>
  <span id="timer" class="timer" aria-live="polite">60:00</span>
  <div class="meta">
    <label style="display:flex;align-items:center;gap:8px;cursor:pointer">
      <input id="themeToggle" type="checkbox" />
      <span>ðŸŒ“</span>
    </label>
  </div>
</header>

<main>
  <div class="card">
    <div class="toolbar"><span>Highlighter:</span>
      <button class="swatch yellow" data-hl="yellow" title="Yellow"></button>
      <button class="swatch green" data-hl="green" title="Green"></button>
      <button class="swatch eraser" id="hl-eraser" title="Eraser">ðŸ§½</button>
    </div>

    <div class="grid">
      <!-- PASSAGE -->
      <article id="passage" class="panel" tabindex="0">
        <h2>READING PASSAGE 1</h2>
        <p class="note">You should spend about 20 minutes on Questions 1â€“13 which are based on Reading Passage 1.</p>

        <h2 style="text-align:center">The Dinosaurs Footprints and Extinction</h2>

        <p><strong>A</strong> EVERYBODY knows that the dinosaurs were killed by an asteroid. Something big hit the earth 65 million years ago and, when the dust had fallen, so had the great reptiles. There is thus a nice if ironic, symmetry in the idea that a similar impact brought about the dinosaurs' rise. That is the thesis proposed by Paul Olsen, of Columbia University, and his colleagues in this week's Science.</p>

        <p><strong>B</strong> Dinosaurs first appeared in the fossil record 230m years ago, during the Triassic period. But they were mostly small, and they shared the earth with lots of other sorts of reptile. It was in the subsequent Jurassic, which began 202 million years ago, that they overran the planet and turned into the monsters depicted in the book and movie "Jurassic Park". (Actually, though, the dinosaurs that appeared on screen were from the still more recent Cretaceous period.) Dr Olsen and his colleagues are not the first to suggest that the dinosaurs inherited the earth as the result of an asteroid strike. But they are the first to show that the takeover did, indeed, happen in a geological eyeblink.</p>

        <p><strong>C</strong> Dinosaur skeletons are rare. Dinosaur footprints are, however, surprisingly abundant. And the sizes of the prints are as good an indication of the sizes of the beasts as are the skeletons themselves. Dr Olsen and his colleagues, therefore, concentrated on prints, not bones.</p>

        <p><strong>D</strong> The prints in question were made in eastern North America, a part of the world the full of rift valleys to those in East Africa today. Like the modern African rift valleys, the Triassic/Jurassic American ones contained lakes, and these lakes grew and shrank at regular intervals because of climatic changes caused by periodic shifts in the earth's orbit. (A similar phenomenon is responsible for modern ice ages.) That regularity, combined with reversals in the earth's magnetic field, which are detectable in the tiny fields of certain magnetic minerals, means that rocks from this place and period can be dated to within a few thousand years. As a bonus, squishy lake-edge sediments are just the things for recording the tracks of passing animals. By dividing the labour between themselves, the ten authors of the paper were able to study such tracks at 80 sites.</p>

        <p><strong>E</strong> The researchers looked at 18 so-called ichnotaxa. These are recognizable types of the footprint that cannot be matched precisely with the species of animal that left them. But they can be matched with a general sort of animal, and thus act as an indicator of the fate of that group, even when there are no bones to tell the story. Five of the ichnotaxa disappear before the end of the Triassic, and four march confidently across the boundary into the Jurassic. Six, however, vanish at the boundary, or only just splutter across it; and there appear from nowhere, almost as soon as the Jurassic begins.</p>

        <p><strong>F</strong> That boundary itself is suggestive. The first geological indication of the impact that killed the dinosaurs was an unusually high level of iridium in rocks at the end of the Cretaceous when the beasts disappear from the fossil record. Iridium is normally rare at the earth's surface, but it is more abundant in meteorites. When people began to believe the impact theory, they started looking for other Cretaceous-and anomalies. One that turned up was a surprising abundance of fern spores in rocks just above the boundary layer â€“ a phenomenon known as a "fern spike".</p>

        <p><strong>G</strong> That matched the theory nicely. Many modern ferns are opportunists. They cannot compete against plants with leaves, but if a piece of land is cleared by, say, a volcanic eruption, they are often the first things to set up shop there. An asteroid strike would have scoured much of the earth of its vegetable cover, and provided a paradise for ferns. A fern spike in the rocks is thus a good indication that something terrible has happened.</p>

        <p><strong>H</strong> Both an iridium anomaly and a fern spike appear in rocks at the end of the Triassic, too. That accounts for the disappearing ichnotaxa: the creatures that made them did not survive the holocaust. The surprise is how rapidly the new ichnotaxa appear.</p>

        <p><strong>I</strong> Dr Olsen and his colleagues suggest that the explanation for this rapid increase in size may be a phenomenon called ecological release. This is seen today when reptiles (which, in modern times, tend to be small creatures) reach islands where they face no competitors. The most spectacular example is on the Indonesian island of Komodo, where local lizards have grown so large that they are often referred to as dragons. The dinosaurs, in other words, could flourish only when the competition had been knocked out.</p>

        <p><strong>J</strong> That leaves the question of where the impact happened. No large hole in the earth's crust seems to be 202m years old. It may, of course, have been overlooked. Old craters are eroded and buried, and not always easy to find. Alternatively, it may have vanished. Although the continental crust is more or less permanent, the ocean floor is constantly recycled by the tectonic processes that bring about continental drift. There is no ocean floor left that is more than 200m years old, so a crater that formed in the ocean would have been swallowed up by now.</p>

        <p><strong>K</strong> There is a third possibility, however. This is that the crater is known, but has been misdated. The Manicouagan "structure", a crater in Quebec, is thought to be 214m years old. It is huge â€“ some 100km across â€“ and seems to be the largest of between three and five craters that formed within a few hours of each other as the lumps of a disintegrated comet hit the earth one by one.</p>

        <div class="qnav" id="qnav"></div>
      </article>

      <!-- QUESTIONS -->
      <aside id="questions" class="panel" tabindex="0">
        <h3>Questions 1â€“6</h3>
        <p>Do the following statements agree with the information given in Reading Passage 1?<br>
        <span class="note">Write <strong>YES</strong> / <strong>NO</strong> / <strong>NOT GIVEN</strong>.</span></p>

        <!-- 1â€“6: YES/NO/NOT GIVEN -->
        <div class="qblock" id="Q1">
          <p><strong>1.</strong> Dr Paul Olsen and his colleagues believe that asteroid knock may also lead to dinosaurs' boom.</p>
          <div class="options">
            <label><input type="radio" name="R1" value="YES"> YES</label>
            <label><input type="radio" name="R1" value="NO"> NO</label>
            <label><input type="radio" name="R1" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>

        <div class="qblock" id="Q2">
          <p><strong>2.</strong> Books and movie like Jurassic Park often exaggerate the size of the dinosaurs.</p>
          <div class="options">
            <label><input type="radio" name="R2" value="YES"> YES</label>
            <label><input type="radio" name="R2" value="NO"> NO</label>
            <label><input type="radio" name="R2" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>

        <div class="qblock" id="Q3">
          <p><strong>3.</strong> Dinosaur footprints are more adequate than dinosaur skeletons.</p>
          <div class="options">
            <label><input type="radio" name="R3" value="YES"> YES</label>
            <label><input type="radio" name="R3" value="NO"> NO</label>
            <label><input type="radio" name="R3" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>

        <div class="qblock" id="Q4">
          <p><strong>4.</strong> The prints were chosen by Dr Olsen to study because they are more detectable than the earth magnetic field to track the date of geological precise within thousands of years.</p>
          <div class="options">
            <label><input type="radio" name="R4" value="YES"> YES</label>
            <label><input type="radio" name="R4" value="NO"> NO</label>
            <label><input type="radio" name="R4" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>

        <div class="qblock" id="Q5">
          <p><strong>5.</strong> Ichnotaxa showed that footprints of dinosaurs offer exact information of the trace left by an individual species.</p>
          <div class="options">
            <label><input type="radio" name="R5" value="YES"> YES</label>
            <label><input type="radio" name="R5" value="NO"> NO</label>
            <label><input type="radio" name="R5" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>

        <div class="qblock" id="Q6">
          <p><strong>6.</strong> We can find more Iridium in the earth's surface than in meteorites.</p>
          <div class="options">
            <label><input type="radio" name="R6" value="YES"> YES</label>
            <label><input type="radio" name="R6" value="NO"> NO</label>
            <label><input type="radio" name="R6" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>

        <h3 style="margin-top:16px">Questions 7â€“13</h3>
        <p>Complete the summary. Write <strong>NO MORE THAN TWO WORDS</strong> from the text for each answer.</p>

        <!-- 7â€“13: summary fill-in -->
        <div class="qblock">
          <table class="fill-onecol" role="table" aria-label="Questions 7 to 13">
            <tbody>
              <tr>
                <td>Dr Olsen and his colleagues applied a phenomenon named <input id="R7" type="text" placeholder="7"/> to explain the large size of the Eubrontes, which is a similar case to that nowadays reptiles invade a place where there are no <input id="R8" type="text" placeholder="8"/>; for example, on an island called Komodo, indigenous huge lizards grow so big that people even regarding them as <input id="R9" type="text" placeholder="9"/>.</td>
              </tr>
              <tr>
                <td>However, there were no old impact trace being found? The answer may be that we have <input id="R10" type="text" placeholder="10"/> the evidence. Old craters are difficult to spot or it probably <input id="R11" type="text" placeholder="11"/> due to the effect of the earth moving. Even a crater formed in Ocean had been <input id="R12" type="text" placeholder="12"/> under the impact of crust movement.</td>
              </tr>
              <tr>
                <td>Besides, the third hypothesis is that the potential evidence â€” some craters maybe <input id="R13" type="text" placeholder="13"/>.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <footer class="nav" aria-label="Passage navigation">
          <a class="btn active" href="readingp1.html" aria-current="page">Passage 1</a>
          <a class="btn" href="readingp2.html">Passage 2</a>
          <a class="btn" href="readingp3.html">Passage 3</a>
        </footer>
      </aside>
    </div>
  </div>
</main>

<script>
const PAGE_ID='reading_p1';

/* ===== Theme ===== */
const themeToggle=document.getElementById('themeToggle');
if(themeToggle){
  const saved=localStorage.getItem('sp_theme')||'light';
  document.documentElement.setAttribute('data-theme', saved);
  themeToggle.checked = saved==='dark';
  themeToggle.addEventListener('change',()=>{
    const mode=themeToggle.checked?'dark':'light';
    document.documentElement.setAttribute('data-theme', mode);
    localStorage.setItem('sp_theme', mode);
  });
}

/* ===== Highlighter ===== */
function wrapSelection(color){
  const sel=window.getSelection();
  if(!sel || sel.isCollapsed) return;
  const range=sel.getRangeAt(0);
  const span=document.createElement('span');
  span.className = 'hl ' + (color==='yellow' ? 'hl-yellow' : 'hl-green');
  try{ range.surroundContents(span); }catch{}
  sel.removeAllRanges();
}
function eraseSelection(){
  const sel=window.getSelection();
  if(!sel || sel.isCollapsed) return;
  const range=sel.getRangeAt(0);
  document.querySelectorAll('#passage span.hl').forEach(el=>{
    try{
      if(range.intersectsNode(el)){
        const parent=el.parentNode;
        while(el.firstChild) parent.insertBefore(el.firstChild, el);
        parent.removeChild(el);
        parent.normalize();
      }
    }catch{}
  });
  sel.removeAllRanges();
}
document.querySelectorAll('[data-hl]').forEach(b=>b.addEventListener('click',()=>wrapSelection(b.getAttribute('data-hl'))));
document.getElementById('hl-eraser')?.addEventListener('click', eraseSelection);

/* ===== Disable autocomplete/spell suggestions on inputs ===== */
function hardDisableSuggestions(scope=document){
  scope.querySelectorAll('input[type="text"], textarea').forEach(el=>{
    el.setAttribute('autocomplete','off');
    el.setAttribute('autocorrect','off');
    el.setAttribute('autocapitalize','off');
    el.setAttribute('spellcheck','false');
    el.setAttribute('data-lpignore','true');
  });
}
hardDisableSuggestions();

/* ===== Debounced aggregator (saves consolidated objects) ===== */
let aggTimer=null;
function scheduleAggregate(){ clearTimeout(aggTimer); aggTimer=setTimeout(aggregateAllAnswers, 200); }

function snapshotPageToPerInput(){
  document.querySelectorAll('input[type=text], textarea, select').forEach(el=>{
    const id = el.id || el.name; if(!id) return;
    localStorage.setItem('R_'+id, el.value || '');
  });
  const radioNames = new Set();
  document.querySelectorAll('input[type=radio][name^="R"]').forEach(r=>radioNames.add(r.name));
  radioNames.forEach(name=>{
    const checked = document.querySelector('input[type=radio][name="'+name+'"]:checked');
    if(checked) localStorage.setItem('R_'+name, checked.value);
  });
}

function aggregateAllAnswers(){
  snapshotPageToPerInput();
  const answers = {};
  for (let i=0; i<localStorage.length; i++){
    const k = localStorage.key(i);
    if(!k || !k.startsWith('R_R')) continue;
    const id = k.slice(2);
    answers[id] = localStorage.getItem(k) || '';
  }
  const qmap = {};
  for (let n=1;n<=13;n++) qmap['Q'+n] = answers['R'+n] || '';
  const iso = new Date().toISOString();
  try{
    localStorage.setItem('sp_reading_answers', JSON.stringify(answers));
    localStorage.setItem('sp_reading_answers_q', JSON.stringify(qmap));
    localStorage.setItem('sp_reading_saved_at', iso);
    localStorage.setItem('sp_reading_p1', JSON.stringify({ page: PAGE_ID, savedAt: iso, answers: qmap }));
  }catch{}
}

/* ===== Autosave bindings (restore + save) ===== */
function saveRadios(name){
  const key='R_'+name;
  const saved=localStorage.getItem(key)||'';
  document.querySelectorAll('input[type=radio][name="'+name+'"]').forEach(n=>{
    if(n.value===saved) n.checked=true;
    n.addEventListener('change',()=>{ localStorage.setItem(key,n.value); scheduleAggregate(); });
  });
}
function bindInput(id){
  const el=document.getElementById(id); if(!el) return;
  const k='R_'+id;
  el.value=localStorage.getItem(k)||'';
  el.addEventListener('input',()=>{ localStorage.setItem(k,el.value); scheduleAggregate(); });
  hardDisableSuggestions(el.parentElement || document);
}
['R1','R2','R3','R4','R5','R6'].forEach(nm=>saveRadios(nm));
['R7','R8','R9','R10','R11','R12','R13'].forEach(bindInput);

/* ===== Footer nav save-then-navigate ===== */
(function(){
  document.querySelectorAll('footer.nav a').forEach(a=>{
    a.addEventListener('click', e=>{
      e.preventDefault();
      aggregateAllAnswers();
      window.location.href = a.getAttribute('href');
    });
  });
})();

/* ===== Question nav (1â€“13) ===== */
(function buildQuestionNav(){
  const container = document.getElementById('qnav');
  if(!container) return;

  const nums = Array.from({length:13}, (_,i)=>i+1);
  const btnMap = new Map();

  function isAnswered(num){
    const id='R'+num;
    const text=document.getElementById(id);
    if(text && text.type==='text') return (text.value||'').trim().length>0;
    const radios=document.querySelectorAll('input[type="radio"][name="'+id+'"]');
    return radios.length ? Array.from(radios).some(r=>r.checked) : false;
  }
  function mark(num, justAnswered){
    const btn=btnMap.get(num); if(!btn) return;
    const answered=isAnswered(num);
    const was=btn.classList.contains('answered');
    if(answered){
      btn.classList.add('answered');
      if(!was && justAnswered){
        btn.classList.add('flash');
        btn.addEventListener('animationend',()=>btn.classList.remove('flash'),{once:true});
      }
    }else{
      btn.classList.remove('answered'); btn.classList.remove('flash');
    }
  }

  nums.forEach(num=>{
    const b=document.createElement('button');
    b.type='button'; b.textContent=String(num);
    b.addEventListener('click',()=>{
      const id='R'+num;
      const text=document.getElementById(id);
      if(text){ text.scrollIntoView({behavior:'smooth',block:'center'}); text.focus(); }
      else{
        const target=document.querySelector('[name="'+id+'"]') || document.getElementById('Q'+num);
        if(target){ (target.closest('.qblock')||target).scrollIntoView({behavior:'smooth',block:'center'}); if(target.focus) target.focus(); }
      }
    });
    container.appendChild(b);
    btnMap.set(num,b);
  });

  nums.forEach(num=>{
    const id='R'+num;
    const text=document.getElementById(id);
    if(text && text.type==='text'){ text.addEventListener('input',()=>mark(num,true)); mark(num,false); }
    else{
      const radios=document.querySelectorAll('input[type="radio"][name="'+id+'"]');
      if(radios.length){ radios.forEach(r=>r.addEventListener('change',()=>mark(num,true))); mark(num,false); }
    }
  });

  window.addEventListener('pageshow', ()=>nums.forEach(n=>mark(n,false)));
})();

/* ===== Ensure timer badge exists ===== */
(function ensureTimerBadge(){
  if(!document.getElementById('timer')){
    const badge=document.createElement('span');
    badge.id='timer'; badge.className='timer'; badge.textContent='60:00';
    const header=document.querySelector('.appbar');
    const meta=document.querySelector('.appbar .meta');
    if(header) header.insertBefore(badge, meta || null);
  }
})();

/* ===== Global 60-minute reading countdown (persists across passages) ===== */
(function readingCountdown(){
  const DURATION_MS = 60 * 60 * 1000;
  const END_KEY = 'sp_reading_end_ts';
  const DONE_KEY = 'sp_reading_done';
  const timerEl = document.getElementById('timer');

  let end = parseInt(localStorage.getItem(END_KEY)||'0', 10);
  const now = Date.now();
  if (!end || end < now) {
    end = now + DURATION_MS;
    localStorage.setItem(END_KEY, String(end));
    localStorage.removeItem(DONE_KEY);
  }
  function fmt(n){ return String(n).padStart(2,'0'); }

  function disableInputs(){
    document.querySelectorAll('input, select, textarea, button').forEach(el=>{
      if (el.id !== 'themeToggle') el.disabled = true;
    });
  }

  function timeUp(){
    if (localStorage.getItem(DONE_KEY)==='1'){ window.location.href='writing.html'; return; }
    disableInputs();
    aggregateAllAnswers();
    localStorage.setItem('sp_reading_submitted_at', new Date().toISOString());
    localStorage.setItem(DONE_KEY,'1');
    setTimeout(()=>window.location.href='writing.html', 300);
  }

  (function tick(){
    if (localStorage.getItem(DONE_KEY)==='1'){ window.location.href='writing.html'; return; }
    const remain = parseInt(localStorage.getItem(END_KEY)||String(end),10) - Date.now();
    if (remain <= 0){ if (timerEl) timerEl.textContent='00:00'; timeUp(); return; }
    const s = Math.floor(remain/1000), m=Math.floor(s/60), r=s%60;
    if (timerEl) timerEl.textContent = `${fmt(m)}:${fmt(r)}`;
    setTimeout(tick, 250);
  })();

  document.addEventListener('click', (ev)=>{
    const a = ev.target.closest('a[href$="writing.html"]');
    if(!a) return;
    aggregateAllAnswers();
    localStorage.setItem('sp_reading_submitted_at', new Date().toISOString());
    localStorage.setItem(DONE_KEY,'1');
  });

  window.sp_saveReadingAndGo = function(){
    aggregateAllAnswers();
    localStorage.setItem('sp_reading_submitted_at', new Date().toISOString());
    localStorage.setItem(DONE_KEY,'1');
    window.location.href='writing.html';
  };
})();

window.addEventListener('visibilitychange',()=>{ if(document.visibilityState==='hidden') aggregateAllAnswers(); });
window.addEventListener('pagehide', aggregateAllAnswers);
window.addEventListener('beforeunload', aggregateAllAnswers);
aggregateAllAnswers();
</script>
</body>
</html>
